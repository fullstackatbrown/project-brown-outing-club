<!DOCTYPE html>

<head>
    <link rel ="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@200&display=swap" rel="stylesheet">
</head>

<body>
    <div class = "header">
        <div class = "nav">
            <h1>Upcoming Trips</h1>
            <h1><a href="/pasttrips">Past Trips</a></h1>
        </div>
        <div class = "logout">
            <img src = "static/img/bocLogoNegative.png">
            <a class="btn btn-primary btn-lg btn-logout btn-block" href="/logout">Logout</a>
        </div>
    </div>
    <div class = "body">
    {% for trip in upcoming_trips %}
        <div class = "trips">
            <div class = "row">
                <img src = "{{ trip['image'] }}">
            </div>
            <div class = "info">
                <div class = "row" id ="details">
                    <a href="#moreinformation" class = "triplink">{{ trip['name'] }}</a>
                    <div>
                        {{ trip['destination'] }} &sdot; ${{ trip['price'] }}
                        <br>
                        {{ trip['departure_date'].strftime('%m/%d/%Y') }} 
                        {% if trip['return_date'] is not defined %}
                            - {{ trip['return_date'].strftime('%m/%d/%Y') }} 
                        {% endif %}
                        <br>
                        Meet at {{ trip['departure_location'] }}, {{ trip['departure_time'].strftime("%I:%M %p") }}
                        {% if trip['return_date'] is not defined %}
                            Return at {{ trip['return_time'].strftime("%I:%M %p") }} 
                        {% endif %} 
                        <br>
                        Contact: {{ trip['contact'] }}
                    </div>
                </div>
                <div class = "row" id = "lottery">
                    {% if trip['noncar_cap'] == 0 %}
                        Unlimited spots
                    {% else %}
                        {{ trip['noncar_cap'] }} spots
                    {% endif %} 
                    <br>
                    Lottery closes at {{ trip['signup_deadline'].strftime('%m/%d') }} @ 11:59 pm
                    <br>
                    {% if trip['id'] in signed_up %}
                        Signed up
                    {% else %}
                        <a href = "{{ url_for('lotterysignup', id=trip['id']) }}">
                            Enter Lottery
                        </a>
                    {% endif %} 
                </div>
            </div>

        </div>
        {% if not loop.last %}
        {% endif %}
    {% endfor %}
    </div>
</body>